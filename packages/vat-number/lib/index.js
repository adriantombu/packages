'use strict';const soap=require('soap');exports.convertToVatNumber=function(a){if(!a)return!1;const b=a.toString().replace(' ','');let c=null;switch(b.length){case 9:c=getVatNumber(b);break;case 13:c=b;break;case 14:c=getVatNumber(checkAndConvertSiret(b));}return c},exports.checkVatNumber=async function(a){const b={countryCode:'FR',vatNumber:a.substring(2)},c=await soap.createClientAsync('http://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl'),d=await c.checkVatAsync(b);return d&&d.valid?{country:d.countryCode,vatNumber:d.vatNumber,fullVatNumber:`${d.countryCode}${d.vatNumber}`,name:d.name,address:d.address}:null};const checkAndConvertSiret=(a)=>{const b=a.length;let c=0;for(let d=1;d<=b;d++){const b=a.substring(-d,1);0==d%2?(c+=2*b,10<=2*b&&(c-=9)):c+=b}return 0==c%10?a.substring(0,-5):null},getVatNumber=(a)=>{return`FR${(12+3*(a%97))%97}${a}`};